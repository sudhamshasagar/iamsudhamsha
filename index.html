<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudhamsha Sagar - Data Analyst Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
    
    <!-- AOS Scroll Animations -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display.swap" rel="stylesheet">

    <style>
        /* --- Base Styles --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a; /* Dark background */
            color: #e2e8f0; /* slate-200 */
        }
        
        /* --- Animated Glossy Background --- */
        #animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -10;
            overflow: hidden;
            background: #0a0a0a;
        }

        #animated-bg::before {
            content: '';
            position: absolute;
            width: 800px;
            height: 800px;
            top: 50%;
            left: 50%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(29, 78, 216, 0.15), rgba(29, 78, 216, 0) 70%);
            animation: pulse 15s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            transform-origin: center;
        }
        
        #animated-bg::after {
            content: '';
            position: absolute;
            width: 600px;
            height: 600px;
            top: 20%;
            left: 10%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(147, 51, 234, 0.1), rgba(147, 51, 234, 0) 70%);
            animation: pulse-reverse 20s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            transform-origin: center;
        }

        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-40%, -60%) scale(1.8);
                opacity: 0.7;
            }
        }
        
        @keyframes pulse-reverse {
            0%, 100% {
                transform: translate(0, 0) scale(1.2);
                opacity: 0.7;
            }
            50% {
                transform: translate(50%, 20%) scale(1);
                opacity: 1;
            }
        }

        /* --- Custom Cursor --- */
        .custom-cursor-dot {
            width: 8px;
            height: 8px;
            background-color: #38bdf8; /* sky-500 */
            border-radius: 50%;
            position: fixed;
            z-index: 9999;
            pointer-events: none;
            transition: transform 0.1s ease-out;
            transform: translate(-50%, -50%);
        }
        
        .custom-cursor-outline {
            width: 30px;
            height: 30px;
            border: 2px solid #38bdf8; /* sky-500 */
            border-radius: 50%;
            position: fixed;
            z-index: 9999;
            pointer-events: none;
            transition: all 0.2s ease-out;
            transform: translate(-50%, -50%);
            opacity: 0.7;
        }

        /* Hide default cursor */
        body, a, button {
            cursor: none;
        }

        /* --- Glassmorphism Card --- */
        .glass-card {
            background: rgba(15, 23, 42, 0.4); /* slate-900 with alpha */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 1.5rem; /* 24px */
            border: 1px solid rgba(56, 189, 248, 0.1); /* sky-400 with alpha */
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        /* --- Animations --- */
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        .animate-spin-slow {
            animation: spin 20s linear infinite;
        }
        .animate-spin-fast {
            animation: spin 1s linear infinite;
        }

        /* --- Custom Scrollbar --- */
        body::-webkit-scrollbar {
            width: 12px;
        }
        body::-webkit-scrollbar-track {
            background: #0a0a0a; /* Match body background */
        }
        body::-webkit-scrollbar-thumb {
            background-color: #1e293b; /* slate-800 */
            border-radius: 20px;
            border: 3px solid #0a0a0a; /* Match body background */
        }
        body::-webkit-scrollbar-thumb:hover {
            background-color: #38bdf8; /* sky-500 */
        }

        /* --- Section Container --- */
        .section {
            padding-top: 6rem;
            padding-bottom: 6rem;
            position: relative;
        }

        /* --- Section Headers --- */
        .section-header {
            font-size: 2.25rem; /* 36px */
            font-weight: 800;
            text-align: center;
            margin-bottom: 1.5rem;
            color: #f1f5f9; /* slate-100 */
            background: -webkit-linear-gradient(45deg, #e0e7ff, #f1f5f9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .section-subheader {
            font-size: 1.125rem; /* 18px */
            text-align: center;
            color: #94a3b8; /* slate-400 */
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 4rem;
        }

        /* --- Skill Badge --- */
        .skill-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(56, 189, 248, 0.1);
            color: #7dd3fc; /* sky-300 */
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            border: 1px solid rgba(56, 189, 248, 0.2);
            transition: all 0.3s ease;
        }
        .skill-badge:hover {
            background: rgba(56, 189, 248, 0.2);
            color: #e0f2fe; /* sky-100 */
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(56, 189, 248, 0.1);
        }

        .skill-badge-sm {
            display: inline-flex;
            align-items: center;
            background: rgba(56, 189, 248, 0.1);
            color: #7dd3fc;
            font-size: 0.75rem;
            font-weight: 500;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            border: 1px solid rgba(56, 189, 248, 0.2);
        }

        /* --- Project Card --- */
        .project-card {
            transition: all 0.3s ease;
        }
        .project-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(56, 189, 248, 0.3);
        }
        
        /* --- Testimonial Card --- */
        .testimonial-card {
            transition: all 0.3s ease;
        }
        .testimonial-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        /* --- Back to Top Button --- */
        #scrollTopBtn {
            position: fixed;
            bottom: -100px; /* Start hidden */
            right: 2rem;
            background: #38bdf8; /* sky-500 */
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.8;
        }
        #scrollTopBtn.show {
            bottom: 2rem;
            opacity: 1;
        }
        #scrollTopBtn:hover {
            background: #0ea5e9; /* sky-600 */
            transform: translateY(-4px);
            opacity: 1;
        }

        /* --- Gemini Modal Styles --- */
        .gemini-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            z-index: 9998;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            padding: 1rem;
        }
        .gemini-modal.show {
            display: flex;
            opacity: 1;
        }
        .gemini-modal-content {
            width: 100%;
            max-width: 600px;
            margin: auto;
            max-height: 90vh;
            overflow-y: auto;
        }
        /* Simple scrollbar for modal */
        .gemini-modal-content::-webkit-scrollbar {
            width: 12px;
        }
        .gemini-modal-content::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.4); /* slate-900 with alpha */
        }
        .gemini-modal-content::-webkit-scrollbar-thumb {
            background-color: #38bdf8; /* sky-500 */
            border-radius: 20px;
            border: 3px solid rgba(15, 23, 42, 0.4); /* Match track */
        }
        .gemini-modal-content::-webkit-scrollbar-thumb:hover {
            background-color: #7dd3fc; /* sky-300 */
        }
    </style>
</head>
<body class="relative">

    <!-- Custom Cursor -->
    <div class="custom-cursor-dot"></div>
    <div class="custom-cursor-outline"></div>

    <!-- Animated Background -->
    <div id="animated-bg"></div>

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 w-full z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="#home" class="text-2xl font-bold text-white">
                Sudhamsha Sagar<span class="text-sky-500">.</span>
            </a>
            
            <!-- Nav Links -->
            <div class="hidden md:flex space-x-8">
                <a href="#home" class="text-slate-300 hover:text-sky-500 transition duration-300">Home</a>
                <a href="#about" class="text-slate-300 hover:text-sky-500 transition duration-300">About</a>
                <a href="#projects" class="text-slate-300 hover:text-sky-500 transition duration-300">Projects</a>
                <a href="#testimonials" class="text-slate-300 hover:text-sky-500 transition duration-300">Testimonials</a>
                <a href="#contact" class="text-slate-300 hover:text-sky-500 transition duration-300">Contact</a>
            </div>
            
            <!-- Contact Button -->
            <a href="#contact" class="hidden md:block bg-sky-500 hover:bg-sky-600 text-white font-medium py-2 px-5 rounded-full transition duration-300 shadow-lg shadow-sky-500/30">
                Hire Me
            </a>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-white">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </nav>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-slate-900/80 backdrop-blur-lg">
            <a href="#home" class="block text-slate-300 hover:text-sky-500 transition duration-300 py-3 px-6 text-center">Home</a>
            <a href="#about" class="block text-slate-300 hover:text-sky-500 transition duration-300 py-3 px-6 text-center">About</a>
            <a href="#projects" class="block text-slate-300 hover:text-sky-500 transition duration-300 py-3 px-6 text-center">Projects</a>
            <a href="#testimonials" class="block text-slate-300 hover:text-sky-500 transition duration-300 py-3 px-6 text-center">Testimonials</a>
            <a href="#contact" class="block text-slate-300 hover:text-sky-500 transition duration-300 py-3 px-6 text-center">Contact</a>
            <div class="p-4">
                <a href="#contact" class="block text-center w-full bg-sky-500 hover:bg-sky-600 text-white font-medium py-3 px-5 rounded-full transition duration-300 shadow-lg shadow-sky-500/30">
                    Hire Me
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>

        <!-- Hero Section -->
        <section id="home" class="min-h-screen flex items-center justify-center text-center pt-20 relative overflow-hidden">
            <div class="container mx-auto px-6 z-10">
                <div data-aos="fade-up">
                    <h1 class="text-4xl md:text-6xl lg:text-7xl font-extrabold text-white mb-6 leading-tight">
                        Hi, I'm Sudhamsha Sagar
                    </h1>
                    <h2 class="text-2xl md:text-3xl font-medium text-sky-400 mb-8">
                        I'm a <span id="typed-role" class="font-bold"></span>
                    </h2>
                    <p class="text-lg text-slate-300 max-w-2xl mx-auto mb-10">
                        A results-oriented Data Analyst with 3 years of experience, turning complex data into clear, actionable insights.
                    </p>
                    
                    <!-- Social Links -->
                    <div class="flex justify-center md:justify-center space-x-6">
                        <a href="https://www.linkedin.com/in/sudhamsha-sagar/" target="_blank" class="text-slate-400 hover:text-sky-500 transition duration-300">
                            <i data-lucide="linkedin" class="w-7 h-7"></i>
                        </a>
                        <a href="https://github.com/sudhamshasagar" target="_blank" class="text-slate-400 hover:text-sky-500 transition duration-300">
                            <i data-lucide="github" class="w-7 h-7"></i>
                        </a>
                        <!-- User: Add your Kaggle link in the href="#" -->
                        <a href="#" target="_blank" class="text-slate-400 hover:text-sky-500 transition duration-300">
                            <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-7 h-7"><title>Kaggle</title><path d="M18.841 24H15.15L9.6 15.223 5.312 24H1.621l6.78-10.957L1.16 0h3.69l4.312 8.81L13.568 0h3.69l-7.23 11.043z"/></svg>
                        </a>
                        <a href="https://wa.me/917975073574" target="_blank" class="text-slate-400 hover:text-sky-500 transition duration-300">
                            <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-7 h-7"><title>WhatsApp</title><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52s-.67-.165-.917-.223c-.247-.057-.52-.057-.767-.057s-.71.104-1.07.497c-.36.393-1.366 1.331-1.366 3.246 0 1.915 1.39 3.768 1.564 4.015.173.247 2.71 4.136 6.572 5.79.913.39 1.636.626 2.199.8.694.213 1.316.188 1.817.113.571-.085 1.758-.715 2.006-1.413.248-.698.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898s2.898 4.347 2.898 6.988c0 5.45-4.436 9.884-9.889 9.884m8.413-18.297A11.815 11.815 0 0012.05.011 11.817 11.817 0 00.012 12.05c0 3.901 1.936 7.404 4.968 9.615L.012 24l2.404-2.37C4.78 23.13 7.343 24 10.02 24c.002 0 .004 0 .006 0h.003c6.538 0 11.84-5.302 11.84-11.84 0-3.14-1.228-6.086-3.415-8.272z"/></svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Scroll Down Indicator -->
            <a href="#about" class="absolute bottom-10 left-1/2 -translate-x-1/2 z-10" data-aos="fade-up" data-aos-delay="500" data-aos-offset="0">
                <div class="w-6 h-10 border-2 border-slate-500 rounded-full flex justify-center items-start p-1">
                    <span class="w-1 h-2 bg-slate-500 rounded-full animate-bounce"></span>
                </div>
            </a>
        </section>

        <!-- About Me Section -->
        <section id="about" class="section bg-slate-900/40">
            <div class="container mx-auto px-6">
                <h2 class="section-header" data-aos="fade-up">About Me</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <!-- Image Column -->
                        <div class="w-full" data-aos="fade-right" data-aos-delay="100">
                          <div id="about-image-container" 
                               class="glass-card aspect-square rounded-3xl w-full max-w-md mx-auto flex items-center justify-center relative overflow-hidden">
                            
                            <!-- Static Image -->
                            <img 
                              id="about-image" 
                              src="sudhamsha.jpg"  <!-- ðŸ”¹ Replace this with your actual image path -->
                              alt="Sudhamsha Sagar - Data Analyst" 
                              class="absolute inset-0 w-full h-full object-cover rounded-3xl opacity-100 transition-opacity duration-1000" />
                            
                          </div>
                        </div>


                    <!-- Text Column -->
                    <div data-aos="fade-left" data-aos-delay="200">
                        <h3 class="text-3xl font-bold text-white mb-6">Who I Am</h3>
                        <p class="text-slate-300 text-lg mb-6 leading-relaxed">
                            I'm a Data Operations Analyst with a passion for uncovering the stories hidden within data. With 3 years of experience in IT and EdTech, I specialize in creating dynamic Power BI dashboards, writing efficient SQL queries, and using Python to build and evaluate predictive models.
                        </p>
                        <p class="text-slate-300 text-lg mb-8 leading-relaxed">
                            I thrive on providing actionable insights that help teams make data-driven decisions. My goal is to bridge the gap between complex data and clear business strategy.
                        </p>
                        
                        <!-- Key Skills -->
                        <h4 class="text-xl font-semibold text-white mb-5">Core Competencies</h4>
                        <div class="flex flex-wrap gap-3">
                            <span class="skill-badge" data-aos="fade-up" data-aos-delay="300"><i data-lucide="bar-chart-3" class="w-4 h-4 mr-2"></i>Power BI</span>
                            <span class="skill-badge" data-aos="fade-up" data-aos-delay="350"><i data-lucide="database" class="w-4 h-4 mr-2"></i>SQL</span>
                            <span class="skill-badge" data-aos="fade-up" data-aos-delay="400"><i data-lucide="code" class="w-4 h-4 mr-2"></i>Python</span>
                            <span class="skill-badge" data-aos="fade-up" data-aos-delay="450"><i data-lucide="brain-circuit" class="w-4 h-4 mr-2"></i>Machine Learning</span>
                            <span class="skill-badge" data-aos="fade-up" data-aos-delay="500"><i data-lucide="presentation" class="w-4 h-4 mr-2"></i>Data Storytelling</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="section">
            <div class="container mx-auto px-6">
                <h2 class="section-header" data-aos="fade-up">Featured Projects</h2>
                <p class="section-subheader" data-aos="fade-up" data-aos-delay="100">
                    A selection of my work, demonstrating my skills in analysis and visualization.
                </p>
                
                <!-- Project Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
                    <!-- Project 1 -->
                    <div class="project-card glass-card overflow-hidden flex flex-col" data-aos="fade-up" data-aos-delay="200">
                        <div class="p-6 md:p-8 flex-grow">
                            <i data-lucide="globe-2" class="w-10 h-10 text-sky-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white mb-3">Global Supply Chain Dashboard</h3>
                            <p class="text-slate-400 mb-5 text-sm leading-relaxed">
                                A dynamic dashboard to track KPIs like Forecast Accuracy (MAPE) and Capacity Utilization.
                            </p>
                            
                            <h5 class="text-sm font-semibold text-sky-300 mb-2">Core Results:</h5>
                            <p class="text-slate-300 text-sm mb-5">Identified key demand-supply gaps and regional inefficiencies, informing better inventory management.</p>
                            
                            <h5 class="text-sm font-semibold text-sky-300 mb-3">Tech Stack:</h5>
                            <div class="flex flex-wrap gap-2 mb-6">
                                <span class="skill-badge-sm">Power BI</span>
                                <span class="skill-badge-sm">DAX</span>
                                <span class="skill-badge-sm">Data Modeling</span>
                            </div>
                        </div>
                        <div class="p-6 pt-0 mt-auto flex justify-end space-x-4">
                            <a href="#" class="text-slate-400 hover:text-sky-500 transition duration-300" title="GitHub Repository">
                                <i data-lucide="github" class="w-5 h-5"></i>
                            </a>
                            <a href="#" class="text-slate-400 hover:text-sky-500 transition duration-300" title="Live Demo">
                                <i data-lucide="external-link" class="w-5 h-5"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Project 2 -->
                    <div class="project-card glass-card overflow-hidden flex flex-col" data-aos="fade-up" data-aos-delay="300">
                        <div class="p-6 md:p-8 flex-grow">
                            <i data-lucide="user-x" class="w-10 h-10 text-sky-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white mb-3">Telecom Churn Analysis</h3>
                            <p class="text-slate-400 mb-5 text-sm leading-relaxed">
                                Analyzed 7K+ customer records to identify key drivers of churn.
                            </p>
                            
                            <h5 class="text-sm font-semibold text-sky-300 mb-2">Core Results:</h5>
                            <p class="text-slate-300 text-sm mb-5">Found that month-to-month, fiber optic customers with no support churned at a >50% rate.</p>

                            <h5 class="text-sm font-semibold text-sky-300 mb-3">Tech Stack:</h5>
                            <div class="flex flex-wrap gap-2 mb-6">
                                <span class="skill-badge-sm">SQL</span>
                                <span class="skill-badge-sm">Power BI</span>
                                <span class="skill-badge-sm">DAX</span>
                                <span class="skill-badge-sm">Data Visualization</span>
                            </div>
                        </div>
                        <div class="p-6 pt-0 mt-auto flex justify-end space-x-4">
                            <a href="#" class="text-slate-400 hover:text-sky-500 transition duration-300" title="GitHub Repository">
                                <i data-lucide="github" class="w-5 h-5"></i>
                            </a>
                            <a href="#" class="text-slate-400 hover:text-sky-500 transition duration-300" title="Live Demo">
                                <i data-lucide="external-link" class="w-5 h-5"></i>
                            </a>
                        </div>
                    </div>

                    <!-- Project 3 -->
                    <div class="project-card glass-card overflow-hidden flex flex-col" data-aos="fade-up" data-aos-delay="400">
                        <div class="p-6 md:p-8 flex-grow">
                            <i data-lucide="users" class="w-10 h-10 text-sky-400 mb-4"></i>
                            <h3 class="text-xl font-bold text-white mb-3">Customer Segmentation</h3>
                            <p class="text-slate-400 mb-5 text-sm leading-relaxed">
                                Built an ML model for customer segmentation using RFM analysis.
                            </p>
                            
                            <h5 class="text-sm font-semibold text-sky-300 mb-2">Core Results:</h5>
                            <p class="text-slate-300 text-sm mb-5">Enabled the marketing team to create highly targeted campaigns, improving engagement metrics.</p>
                            
                            <h5 class="text-sm font-semibold text-sky-300 mb-3">Tech Stack:</h5>
                            <div class="flex flex-wrap gap-2 mb-6">
                                <span class="skill-badge-sm">Python</span>
                                <span class="skill-badge-sm">Pandas</span>
                                <span class="skill-badge-sm">Scikit-learn</span>
                                <span class="skill-badge-sm">ML</span>
                            </div>
                        </div>
                        <div class="p-6 pt-0 mt-auto flex justify-end space-x-4">
                            <a href="#" class="text-slate-400 hover:text-sky-500 transition duration-300" title="GitHub Repository">
                                <i data-lucide="github" class="w-5 h-5"></i>
                            </a>
                            <a href="#" class="text-slate-400 hover:text-sky-500 transition duration-300" title="Live Demo">
                                <i data-lucide="external-link" class="w-5 h-5"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- AI Project Generator Button -->
                <div class="text-center" data-aos="fade-up" data-aos-delay="500">
                    <button id="openGeminiModalBtn" class="bg-gradient-to-r from-sky-500 to-cyan-500 hover:from-sky-600 hover:to-cyan-600 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-lg shadow-sky-500/30 flex items-center gap-2 mx-auto">
                        <i data-lucide="wand-2" class="w-5 h-5"></i>
                        âœ¨ Generate AI Project Idea
                    </button>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="section bg-slate-900/40">
            <div class="container mx-auto px-6">
                <h2 class="section-header" data-aos="fade-up">Testimonials</h2>
                <p class="section-subheader" data-aos="fade-up" data-aos-delay="100">
                    What my colleagues and managers say about my work.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Testimonial 1 -->
                    <div class="testimonial-card glass-card p-8" data-aos="fade-up" data-aos-delay="200">
                        <i data-lucide="quote" class="w-10 h-10 text-sky-500 opacity-50 mb-4"></i>
                        <p class="text-slate-300 mb-6 italic">"Sudhamsha's ability to dive into complex data and surface critical insights is second to none. His Power BI dashboards were a game-changer for our team's performance tracking."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/48x48/64748b/e2e8f0?text=JD" alt="Testimonial author" class="w-12 h-12 rounded-full mr-4 border-2 border-sky-600">
                            <div>
                                <h4 class="font-bold text-white">Jane Doe</h4>
                                <p class="text-sm text-slate-400">Senior Operations Manager, Guvi</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 2 -->
                    <div class="testimonial-card glass-card p-8" data-aos="fade-up" data-aos-delay="300">
                        <i data-lucide="quote" class="w-10 h-10 text-sky-500 opacity-50 mb-4"></i>
                        <p class="text-slate-300 mb-6 italic">"He has a keen eye for detail and a structured approach to problem-solving. Sudhamsha's analysis on student retention directly led to a 20% increase in our key retention metrics."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/48x48/64748b/e2e8f0?text=RS" alt="Testimonial author" class="w-12 h-12 rounded-full mr-4 border-2 border-sky-600">
                            <div>
                                <h4 class="font-bold text-white">Ravi Sharma</h4>
                                <p class="text-sm text-slate-400">Customer Success Head, Codingal</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Testimonial 3 -->
                    <div class="testimonial-card glass-card p-8" data-aos="fade-up" data-aos-delay="400">
                        <i data-lucide="quote" class="w-10 h-10 text-sky-500 opacity-50 mb-4"></i>
                        <p class="text-slate-300 mb-6 italic">"A highly motivated and collaborative team member. Sudhamsha's work in optimizing our tutor scheduling system was impressive, reducing no-shows from 60% to just 2%."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/48x48/64748b/e2e8f0?text=AK" alt="Testimonial author" class="w-12 h-12 rounded-full mr-4 border-2 border-sky-600">
                            <div>
                                <h4 class="font-bold text-white">Anil Kumar</h4>
                                <p class="text-sm text-slate-400">Operations Lead, Turito</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="section">
            <div class="container mx-auto px-6">
                <h2 class="section-header" data-aos="fade-up">Get In Touch</h2>
                <p class="section-subheader" data-aos="fade-up" data-aos-delay="100">
                    I'm open to discussing new opportunities and projects.
                </p>
                
                <!-- AI Interview Prep Button -->
                <div class="text-center mb-10" data-aos="fade-up" data-aos-delay="150">
                    <button id="openRandomQuestionModalBtn" class="bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white font-bold py-3 px-8 rounded-full transition duration-300 shadow-lg shadow-indigo-500/30 flex items-center gap-2 mx-auto">
                        <i data-lucide="user-check" class="w-5 h-5"></i>
                        âœ¨ Get a Random Interview Question
                    </button>
                </div>

                <div class="glass-card max-w-4xl mx-auto p-8 md:p-12" data-aos="fade-up" data-aos-delay="200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Contact Info -->
                        <div class="space-y-6">
                            <h3 class="text-2xl font-bold text-white mb-4">Contact Information</h3>
                            <div class="flex items-center gap-4">
                                <i data-lucide="mail" class="w-6 h-6 text-sky-400 shrink-0"></i>
                                <div>
                                    <h4 class="text-lg font-semibold text-white">Email</h4>
                                    <a href="mailto:sudhamshasagar@gmail.com" class="text-slate-300 hover:text-sky-400 transition-colors">sudhamshasagar@gmail.com</a>
                                </div>
                            </div>
                            <div class="flex items-center gap-4">
                                <i data-lucide="phone" class="w-6 h-6 text-sky-400 shrink-0"></i>
                                <div>
                                    <h4 class="text-lg font-semibold text-white">Phone</h4>
                                    <a href="tel:+917975073574" class="text-slate-300 hover:text-sky-400 transition-colors">+91 7975073574</a>
                                </div>
                            </div>
                            <div class="flex items-center gap-4">
                                <i data-lucide="map-pin" class="w-6 h-6 text-sky-400 shrink-0"></i>
                                <div>
                                    <h4 class="text-lg font-semibold text-white">Location</h4>
                                    <p class="text-slate-300">Bengaluru, India</p>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Form -->
                        <form id="contactForm" class="space-y-5">
                            <h3 class="text-2xl font-bold text-white mb-4">Send Me a Message</h3>
                            <div>
                                <label for="name" class="block text-sm font-medium text-slate-300 mb-2">Name</label>
                                <input type="text" id="name" name="name" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all" required>
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-slate-300 mb-2">Email</label>
                                <input type="email" id="email" name="email" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all" required>
                            </div>
                            <div>
                                <label for="intent" class="block text-sm font-medium text-slate-300 mb-2">My Intent (e.g., "Job opportunity", "Project collaboration")</label>
                                <input type="text" id="intent" name="intent" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all">
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-slate-300 mb-2">Message</label>
                                <textarea id="message" name="message" rows="4" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all" required></textarea>
                            </div>
                            <div class="flex flex-col sm:flex-row gap-4">
                                <button type="submit" class="flex-1 bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg shadow-sky-500/30">
                                    Send Message
                                </button>
                                <button type="button" id="draftWithAIBtn" class="flex-1 bg-slate-700 hover:bg-slate-600 text-sky-300 font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center justify-center gap-2">
                                    <i data-lucide="wand-2" class="w-5 h-5"></i>
                                    <span id="aiButtonText">Draft with AI</span>
                                    <div id="aiButtonLoader" class="w-5 h-5 border-2 border-t-sky-300 border-slate-500 rounded-full animate-spin-fast hidden"></div>
                                </button>
                            </div>
                            <p id="formStatus" class="text-center text-sm mt-4"></p>
                        </form>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900/60 py-8">
        <div class="container mx-auto px-6 text-center text-slate-400">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="https://www.linkedin.com/in/sudhamsha-sagar/" target="_blank" class="text-slate-400 hover:text-sky-500 transition duration-300">
                    <i data-lucide="linkedin" class="w-6 h-6"></i>
                </a>
                <a href="https://github.com/sudhamshasagar" target="_blank" class="text-slate-400 hover:text-sky-500 transition duration-300">
                    <i data-lucide="github" class="w-6 h-6"></i>
                </a>
                <!-- User: Add your Kaggle link in the href="#" -->
                <a href="https://www.kaggle.com/sudhamshasagar" target="_blank" 
                   class="text-slate-400 hover:text-sky-500 transition duration-300" 
                   aria-label="Kaggle">
                  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" 
                       fill="currentColor" class="w-6 h-6">
                    <title>Kaggle</title>
                    <path d="M16.193 13.447l7.44 10.553h-4.65l-5.778-8.204v8.204H8.402V0h4.803v11.5l5.777-7.5h4.762z"/>
                  </svg>
                </a>
                
                <a href="https://wa.me/917975073574" target="_blank" 
                   class="text-slate-400 hover:text-green-500 transition duration-300" 
                   aria-label="WhatsApp">
                  <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" 
                       fill="currentColor" class="w-6 h-6">
                    <title>WhatsApp</title>
                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52s-.67-.165-.917-.223c-.247-.057-.52-.057-.767-.057s-.71.104-1.07.497c-.36.393-1.366 1.331-1.366 3.246 0 1.915 1.39 3.768 1.564 4.015.173.247 2.71 4.136 6.572 5.79.913.39 1.636.626 2.199.8.694.213 1.316.188 1.817.113.571-.085 1.758-.715 2.006-1.413.248-.698.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898s2.898 4.347 2.898 6.988c0 5.45-4.436 9.884-9.889 9.884"/>
                  </svg>
                </a>
            </div>
            <p>&copy; 2025 Sudhamsha Sagar. All rights reserved.</p>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <a href="#home" id="scrollTopBtn" class="shadow-lg">
        <i data-lucide="arrow-up" class="w-5 h-5"></i>
    </a>
    
    <!-- Gemini Project Generator Modal -->
    <div id="geminiModal" class="gemini-modal items-center justify-center">
        <div id="geminiModalContent" class="gemini-modal-content glass-card p-6 md:p-8 rounded-2xl shadow-2xl relative">
            <!-- Close Button -->
            <button id="closeGeminiModalBtn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            
            <h3 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                <i data-lucide="wand-2" class="w-6 h-6 text-sky-400"></i>
                AI Project Idea Generator
            </h3>
            <p class="text-slate-300 mb-6">
                Enter a dataset type and a key metric to generate a new data analysis project idea.
            </p>
            
            <!-- Input Fields -->
            <div class="space-y-4 mb-6">
                <div>
                    <label for="datasetType" class="block text-sm font-medium text-slate-300 mb-2">Dataset Type (e.g., "E-commerce Sales", "Healthcare")</label>
                    <input type="text" id="datasetType" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all" value="E-commerce Sales">
                </div>
                <div>
                    <label for="keyMetric" class="block text-sm font-medium text-slate-300 mb-2">Key Metric (e.g., "Customer Churn", "Conversion Rate")</label>
                    <input type="text" id="keyMetric" class="w-full bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all" value="Customer Churn">
                </div>
            </div>

            <!-- Generate Button -->
            <button id="generateProjectBtn" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg shadow-sky-500/30 flex items-center justify-center gap-2">
                <i data-lucide="brain-circuit" class="w-5 h-5"></i>
                Generate Project
            </button>

            <!-- Results Area -->
            <div id="geminiResult" class="mt-6">
                <!-- Loader -->
                <div id="geminiLoader" class="text-center py-4 hidden">
                    <div class="w-8 h-8 border-4 border-t-sky-500 border-slate-700 rounded-full animate-spin mx-auto"></div>
                    <p class="text-slate-400 mt-2 text-sm">Generating idea...</p>
                </div>
                <!-- Content -->
                <div id="geminiResultContent">
                    <!-- Generated content will be injected here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Gemini Interview Prep Modal -->
    <div id="randomQuestionModal" class="gemini-modal items-center justify-center">
        <div id="randomQuestionModalContent" class="gemini-modal-content glass-card p-6 md:p-8 rounded-2xl shadow-2xl relative">
            <!-- Close Button -->
            <button id="closeRandomQuestionModalBtn" class="absolute top-4 right-4 text-slate-400 hover:text-white transition-colors">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            
            <h3 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                <i data-lucide="user-check" class="w-6 h-6 text-purple-400"></i>
                AI Interview Question
            </h3>
            <p class="text-slate-300 mb-6">
                Click the button to generate a random interview question tailored to my data analyst profile.
            </p>

            <!-- Generate Button -->
            <button id="generateRandomQuestionBtn" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg shadow-indigo-500/30 flex items-center justify-center gap-2">
                <i data-lucide="brain-circuit" class="w-5 h-5"></i>
                Generate Question
            </button>

            <!-- Results Area -->
            <div id="randomQuestionResult" class="mt-6">
                <!-- Loader -->
                <div id="randomQuestionLoader" class="text-center py-4 hidden">
                    <div class="w-8 h-8 border-4 border-t-indigo-500 border-slate-700 rounded-full animate-spin mx-auto"></div>
                    <p class="text-slate-400 mt-2 text-sm">Generating question...</p>
                </div>
                <!-- Content -->
                <div id="randomQuestionResultContent" class="hidden">
                    <!-- Card for the question -->
                    <div class="glass-card border-l-4 border-purple-400 p-6">
                        <i data-lucide="mic" class="w-6 h-6 text-purple-400 mb-4"></i>
                        <p id="questionText" class="text-white text-lg"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- JS Libraries -->
    <!-- Typed.js for typing animation -->
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
    <!-- AOS for scroll animations -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Custom JS -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Initialize AOS ---
            AOS.init({
                duration: 800,
                once: true,
                offset: 50,
            });

            // --- Lucide Icons ---
            lucide.createIcons();

            // --- Header Scroll Effect ---
            const header = document.getElementById('header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('bg-slate-900/80', 'backdrop-blur-lg', 'shadow-lg');
                } else {
                    header.classList.remove('bg-slate-900/80', 'backdrop-blur-lg', 'shadow-lg');
                }
            });

            // --- Mobile Menu Toggle ---
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            // Close menu when a link is clicked
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });

            // --- Typed.js Role Animation ---
            new Typed('#typed-role', {
                strings: ['Data Analyst', 'Power BI Developer', 'Data Storyteller', 'SQL Specialist'],
                typeSpeed: 70,
                backSpeed: 50,
                backDelay: 2000,
                loop: true,
            });
            
            // --- Custom Cursor ---
            const cursorDot = document.querySelector('.custom-cursor-dot');
            const cursorOutline = document.querySelector('.custom-cursor-outline');
            
            window.addEventListener('mousemove', (e) => {
                cursorDot.style.left = e.clientX + 'px';
                cursorDot.style.top = e.clientY + 'px';
                cursorOutline.style.left = e.clientX + 'px';
                cursorOutline.style.top = e.clientY + 'px';
            });

            document.querySelectorAll('a, button, [data-aos]').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursorOutline.style.transform = 'translate(-50%, -50%) scale(1.5)';
                    cursorOutline.style.opacity = '1';
                });
                el.addEventListener('mouseleave', () => {
                    cursorOutline.style.transform = 'translate(-50%, -50%) scale(1)';
                    cursorOutline.style.opacity = '0.7';
                });
            });

            // --- Back to Top Button ---
            const scrollTopBtn = document.getElementById('scrollTopBtn');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    scrollTopBtn.classList.add('show');
                } else {
                    scrollTopBtn.classList.remove('show');
                }
            });

            // --- AI Image Generation (About Me) ---
            async function generateAboutImage() {
                const loader = document.getElementById('image-loader');
                const imageEl = document.getElementById('about-image');
                const imageContainer = document.getElementById('about-image-container');

                if (!loader || !imageEl || !imageContainer) return;

                const prompt = "Abstract digital art, flowing data streams, analytical graphs, neural network nodes, professional, sophisticated, dark blue, purple, and teal colors, representing data insight.";
                const payload = {
                    instances: { prompt: prompt },
                    parameters: { "sampleCount": 1 }
                };
                const apiKey = ""; // API key will be provided by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;

                let retries = 3;
                let delay = 1000;

                while (retries > 0) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                        const result = await response.json();
                        if (result.predictions && result.predictions[0]?.bytesBase64Encoded) {
                            const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                            imageEl.src = imageUrl;
                            imageEl.onload = () => {
                                loader.classList.add('hidden');
                                imageEl.classList.remove('opacity-0');
                            };
                            return; // Success
                        } else {
                            throw new Error("Invalid image response");
                        }
                    } catch (error) {
                        retries--;
                        if (retries === 0) {
                            // Failed after retries, show a fallback
                            loader.innerHTML = `<i data-lucide="image-off" class="w-12 h-12 text-slate-500 mx-auto"></i><p class="text-slate-500 mt-2 text-sm">AI image failed to load.</p>`;
                            lucide.createIcons(); // Re-render icon
                        } else {
                            await new Promise(res => setTimeout(res, delay));
                            delay *= 2; // Exponential backoff
                        }
                    }
                }
            }
            
            // Generate the image when the page loads
            generateAboutImage();

            // --- Gemini Project Generator Modal Logic ---
            const geminiModal = document.getElementById('geminiModal');
            const openModalBtn = document.getElementById('openGeminiModalBtn');
            const closeModalBtn = document.getElementById('closeGeminiModalBtn');
            const generateProjectBtn = document.getElementById('generateProjectBtn');
            const geminiLoader = document.getElementById('geminiLoader');
            const geminiResultContent = document.getElementById('geminiResultContent');
            const datasetTypeInput = document.getElementById('datasetType');
            const keyMetricInput = document.getElementById('keyMetric');

            if (openModalBtn) {
                openModalBtn.addEventListener('click', () => {
                    geminiModal.classList.add('show');
                });
            }

            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', () => {
                    geminiModal.classList.remove('show');
                });
            }

            // Close modal on outside click
            if (geminiModal) {
                geminiModal.addEventListener('click', (e) => {
                    if (e.target === geminiModal) {
                        geminiModal.classList.remove('show');
                    }
                });
            }

            if (generateProjectBtn) {
                generateProjectBtn.addEventListener('click', async () => {
                    const datasetType = datasetTypeInput.value || "E-commerce Sales";
                    const keyMetric = keyMetricInput.value || "Customer Churn";

                    geminiLoader.classList.remove('hidden');
                    geminiResultContent.innerHTML = ''; // Clear previous results
                    generateProjectBtn.disabled = true;

                    const systemPrompt = "You are a senior data science manager. Generate a concise, practical data analysis project idea based on a dataset type and a key metric. The project should be suitable for a portfolio. Provide the response as a JSON object with keys: `projectTitle`, `projectSummary`, `analysisSteps` (an array of strings), and `suggestedTechStack` (an array of strings).";
                    const userQuery = `Dataset Type: ${datasetType}\nKey Metric: ${keyMetric}`;

                    const payload = {
                        contents: [{ parts: [{ text: userQuery }] }],
                        systemInstruction: {
                            parts: [{ text: systemPrompt }]
                        },
                        generationConfig: {
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: "OBJECT",
                                properties: {
                                    "projectTitle": { "type": "STRING" },
                                    "projectSummary": { "type": "STRING" },
                                    "analysisSteps": { "type": "ARRAY", "items": { "type": "STRING" } },
                                    "suggestedTechStack": { "type": "ARRAY", "items": { "type": "STRING" } }
                                }
                            }
                        }
                    };
                    const apiKey = ""; // API key will be provided by the environment
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                    
                    let retries = 3;
                    let delay = 1000;

                    while (retries > 0) {
                        try {
                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

                            const result = await response.json();
                            if (result.candidates && result.candidates[0].content?.parts?.[0]?.text) {
                                const jsonText = result.candidates[0].content.parts[0].text;
                                const data = JSON.parse(jsonText);
                                displayGeneratedProject(data);
                                geminiLoader.classList.add('hidden');
                                generateProjectBtn.disabled = false;
                                return; // Success
                            } else {
                                throw new Error("Invalid response from Gemini API");
                            }
                        } catch (error) {
                            retries--;
                            if (retries === 0) {
                                geminiLoader.classList.add('hidden');
                                geminiResultContent.innerHTML = `<p class="text-red-400 text-sm">Failed to generate project idea. Please try again later.</p>`;
                                generateProjectBtn.disabled = false;
                            } else {
                                await new Promise(res => setTimeout(res, delay));
                                delay *= 2; // Exponential backoff
                            }
                        }
                    }
                });
            }
            
            function displayGeneratedProject(data) {
                const stepsHtml = data.analysisSteps.map(step => `<li class="flex items-start gap-2"><i data-lucide="check-square" class="w-4 h-4 text-sky-400 shrink-0 mt-1"></i><span>${step}</span></li>`).join('');
                const techHtml = data.suggestedTechStack.map(tech => `<span class="skill-badge-sm">${tech}</span>`).join('');

                geminiResultContent.innerHTML = `
                    <div class="border-t border-slate-700 pt-4 space-y-4">
                        <h4 class="text-xl font-bold text-white">${data.projectTitle}</h4>
                        <p class="text-slate-300 text-sm">${data.projectSummary}</p>
                        <div>
                            <h5 class="text-md font-semibold text-sky-300 mb-2">Analysis Steps:</h5>
                            <ul class="text-slate-300 text-sm space-y-2">
                                ${stepsHtml}
                            </ul>
                        </div>
                        <div>
                            <h5 class="text-md font-semibold text-sky-300 mb-2">Tech Stack:</h5>
                            <div class="flex flex-wrap gap-2">
                                ${techHtml}
                            </div>
                        </div>
                    </div>
                `;
                lucide.createIcons(); // Re-render icons
                
                // Re-apply skill badge styles
                const badgeSmStyles = 'inline-flex items-center bg-sky-900/50 text-sky-300 text-xs font-medium px-2.5 py-0.5 rounded-full border border-sky-800/50';
                geminiResultContent.querySelectorAll('.skill-badge-sm').forEach(badge => {
                    badge.setAttribute('class', `${badge.getAttribute('class')} ${badgeSmStyles}`);
                });
            }

            // --- Gemini Interview Prep Modal Logic ---
            const interviewModal = document.getElementById('randomQuestionModal');
            const openInterviewModalBtn = document.getElementById('openRandomQuestionModalBtn');
            const closeInterviewModalBtn = document.getElementById('closeRandomQuestionModalBtn');
            const generateInterviewBtn = document.getElementById('generateRandomQuestionBtn');
            const interviewLoader = document.getElementById('randomQuestionLoader');
            const interviewResultContent = document.getElementById('randomQuestionResultContent');
            const questionTextEl = document.getElementById('questionText');

            if (openInterviewModalBtn) {
                openInterviewModalBtn.addEventListener('click', () => {
                    interviewModal.classList.add('show');
                });
            }

            if (closeInterviewModalBtn) {
                closeInterviewModalBtn.addEventListener('click', () => {
                    interviewModal.classList.remove('show');
                });
            }

            // Close modal on outside click
            if (interviewModal) {
                interviewModal.addEventListener('click', (e) => {
                    if (e.target === interviewModal) {
                        interviewModal.classList.remove('show');
                    }
                });
            }

            if (generateInterviewBtn) {
                generateInterviewBtn.addEventListener('click', async () => {
                    interviewLoader.classList.remove('hidden');
                    interviewResultContent.classList.add('hidden'); // Hide old question
                    generateInterviewBtn.disabled = true;

                    // This context is built from your portfolio content
                    const portfolioContext = `
                        **Summary:** 3 years as a Data Operations Analyst in IT/EdTech.
                        **Skills:** Power BI, Tableau, Excel, SQL, Python, Machine Learning (Regression, Decision Trees, Random Forest), Matplotlib, Seaborn, DAX.
                        **Projects:**
                        1. **Global Supply Chain Dashboard:** Used Power BI and DAX to visualize KPIs like Forecast Accuracy (MAPE) and Capacity Utilization.
                        2. **Telecom Churn Analysis:** Used SQL and Power BI/DAX to analyze 7K+ customer records and found a >50% churn rate in a specific segment.
                        3. **Customer Segmentation:** Used Python and Machine Learning (RFM analysis) for targeted marketing.
                    `;

                    const systemPrompt = "You are an expert technical recruiter and data science hiring manager. Your task is to generate ONE insightful interview question based on a candidate's portfolio. The question can be technical, project-based, or behavioral. Provide only the question as plain text.";
                    
                    const userQuery = `Generate one random, insightful interview question for a data analyst candidate with the following profile: \n\n${portfolioContext}`;
                    
                    const payload = {
                        contents: [{ parts: [{ text: userQuery }] }],
                        systemInstruction: {
                            parts: [{ text: systemPrompt }]
                        },
                    };

                    const apiKey = ""; // API key will be provided by the environment
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                    let retries = 3;
                    let delay = 1000;

                    while (retries > 0) {
                        try {
                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            if (!response.ok) {
                                throw new Error(`HTTP error! status: ${response.status}`);
                            }

                            const result = await response.json();

                            if (result.candidates && result.candidates[0].content?.parts?.[0]?.text) {
                                const questionText = result.candidates[0].content.parts[0].text;
                                
                                // Display the question
                                if(questionTextEl) {
                                    questionTextEl.textContent = questionText;
                                }
                                interviewResultContent.classList.remove('hidden');
                                interviewLoader.classList.add('hidden');
                                generateInterviewBtn.disabled = false;
                                return; // Success
                            } else {
                                throw new Error("Invalid response structure from Gemini API.");
                            }

                        } catch (error) {
                            // Don't log retry errors to console
                            retries--;
                            if (retries === 0) {
                                interviewLoader.classList.add('hidden');
                                if(questionTextEl) {
                                    questionTextEl.textContent = 'Failed to generate question. Please try again.';
                                }
                                interviewResultContent.classList.remove('hidden');
                                generateInterviewBtn.disabled = false;
                            } else {
                                await new Promise(res => setTimeout(res, delay));
                                delay *= 2; // Exponential backoff
                            }
                        }
                    }
                });
            }

            // --- Contact Form AI Draft ---
            const draftBtn = document.getElementById('draftWithAIBtn');
            const intentInput = document.getElementById('intent');
            const messageInput = document.getElementById('message');
            const nameInput = document.getElementById('name');
            const aiButtonText = document.getElementById('aiButtonText');
            const aiButtonLoader = document.getElementById('aiButtonLoader');

            if (draftBtn) {
                draftBtn.addEventListener('click', async () => {
                    const intent = intentInput.value || "A quick question";
                    const name = nameInput.value || "Visitor";

                    aiButtonText.classList.add('hidden');
                    aiButtonLoader.classList.remove('hidden');
                    draftBtn.disabled = true;

                    const systemPrompt = "You are a helpful assistant. Write a professional, polite, and concise contact message (around 50 words) from a visitor to Sudhamsha (a Data Analyst). The message should be based on the visitor's name and their stated 'intent'. Start the message with 'Hi Sudhamsha,' and sign off with the visitor's name. Provide only the message as plain text.";
                    const userQuery = `My Name: ${name}\nMy Intent: ${intent}`;

                    const payload = {
                        contents: [{ parts: [{ text: userQuery }] }],
                        systemInstruction: {
                            parts: [{ text: systemPrompt }]
                        },
                    };
                    const apiKey = ""; // API key will be provided by the environment
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                    let retries = 3;
                    let delay = 1000;

                    while (retries > 0) {
                        try {
                            const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                            
                            const result = await response.json();
                            if (result.candidates && result.candidates[0].content?.parts?.[0]?.text) {
                                const message = result.candidates[0].content.parts[0].text;
                                messageInput.value = message;
                                // Auto-resize textarea
                                messageInput.style.height = 'auto';
                                messageInput.style.height = (messageInput.scrollHeight) + 'px';
                                break; // Success
                            } else {
                                throw new Error("Invalid response from Gemini API");
                            }
                        } catch (error) {
                            retries--;
                            if (retries === 0) {
                                messageInput.value = "AI draft failed. Please write your message manually.";
                            } else {
                                await new Promise(res => setTimeout(res, delay));
                                delay *= 2;
                            }
                        } finally {
                            aiButtonText.classList.remove('hidden');
                            aiButtonLoader.classList.add('hidden');
                            draftBtn.disabled = false;
                        }
                    }
                });
            }

            // --- Contact Form Submission (Mock) ---
            const contactForm = document.getElementById('contactForm');
            const formStatus = document.getElementById('formStatus');

            if (contactForm) {
                contactForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    formStatus.textContent = 'Sending...';
                    formStatus.classList.remove('text-red-400');
                    formStatus.classList.add('text-green-400');

                    // Simulate form submission
                    setTimeout(() => {
                        formStatus.textContent = 'Message sent successfully! Thank you.';
                        contactForm.reset();
                        // Reset textarea height
                        messageInput.style.height = 'auto'; 
                    }, 1500);
                });
            }

        });
    </script>

</body>
</html>


